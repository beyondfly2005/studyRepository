

> https://www.bilibili.com/video/BV1dQ4y1A75e?p=5

### 谷粒学院





### 





#### 后端技术



#### 前端技术

- vue
- 

#### 其他技术

- 阿里云oss
- 阿里云视频点播服务
- 阿里云短信服务器
- 微信支付
- docker
- git



#### P6 MybatisPuls 介绍

###### 一、简介

官网地址：http://mp.baomidou.com

参考教程：http://mp.baomidou.com/guide/



###### 二、特性

- 无侵入
- 损耗小
- 强大CRUD操作
- 支持Lambda形式调用
- 支持多种数据库



#### P7 Mybatis-Plus入门案例

###### 1、创建数据，创建数据库表

```sql
DROP TABLE IF EXISTS user;
CREATE TABLE user
(
 id BIGINT(20) NOT NULL COMMENT '主键ID',
 name VARCHAR(30) NULL DEFAULT NULL COMMENT '姓名',
 age INT(11) NULL DEFAULT NULL COMMENT '年龄',
 email VARCHAR(50) NULL DEFAULT NULL COMMENT '邮箱',
 PRIMARY KEY (id) 
 )
```

```sql
INSERT INTO user (id, name, age, email) VALUES
(1, 'Jone', 18, 'test1@baomidou.com'), (2, 'Jack', 20, 'test2@baomidou.com'), (3, 'Tom', 28, 'test3@baomidou.com'), (4, 'Sandy', 21, 'test4@baomidou.com'), (5, 'Billie', 24, 'test5@baomidou.com');
```



###### 2、创建SpringBoot工程

​	springboot-2.2.1版本

###### 3、引入相关依赖

- 引入mybatis依赖

```xml
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.4.0</version>
</dependency>
```

- 引入MySql依赖

```xml
<!--mysql-->
<dependency>
	<groupId>mysql</groupId
	<artifactId>mysql-connector-java</artifactId>
</dependency>
```



- 引入lombok依赖

```xml
<!--lombok用来简化实体类-->
	<dependency>
	<groupId>org.projectlombok</groupId>
	<artifactId>lombok</artifactId>
</dependency
```



###### 4、安装lombok插件



###### 5、配置application.properies文件

mysql5配置

```properties
#mysql数据库连接
spring.datasource.driver-class-namespring.datasource.url=jdbc:mysql://spring.datasource.username=root
spring.datasource.password=123456
```

mysql8配置（springboot2.1以上）

```properties
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/mybatis_plus?
serverTimezone=GMT%2B8
spring.datasource.username=root
spring.datasource.password=123456
```

UserMapper 接口



@MapperScan



测试类

FindAll



配置日志输出

```
#mybatis日志 mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl

```

MP自动生成ID，不需要手工设置

19位值

MP主键生成策略

参考资料：分布式系统唯一ID生成方案汇总：https://www.cnblogs.com/haoxinyue/p/5208136.html

- 自动增长 AUTO INCRMENT
  - 缺点 分库分表时 使用自动增长不方便
- UUID
  - 随机值
- Redis生成ID
- mp自动策略 雪花算法
  - 41bit机器id
  - 5bit机器id
  - 毫秒内的流水号





如何配置主键生成策略

```
@TableId(type=AUTO)  自动增长
@TableId(type=IPUT)  自行设置输入
@TableId(type=NONE) 自行设置
@TableId(type=UUID)  随机数
@TableId(type=ID_WORKER)  19位值雪花算法  Long值
@TableId(type=ID_WORKER_STR) 19位雪花片算法 字符串类型
```



#### P11 MybatisPlus实现自动填充



#### P12 MybatisPlus实现乐观锁



#### P14 MybatisPlus实现分页



#### P15 MybatisPlus 实现逻辑删除



#### P16 MybatisPlus性能分析插件



#### P17 MybatisPlus 实现条件查询



#### P18 第二天内容介绍

- 前后端分离开发概念
- 讲师摸块（后端）
- 讲师后端crud操作

#### P19 前后端分离概念介绍

1、前后端分离





#### P21 项目环境搭建



##### 创建 application.properties配置文件

```properties
#服务端口
server.port=8001

#服务名
spring.application.name=service-edu

#环境设置 dev test prod
spring.profiles.active=dev

#mysql数据库连接
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/course_db?serverTimezone=GMT%2B8
spring.datasource.username=root
spring.datasource.password=123456

#mybatis日志
mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl
```





#### P22 项目环境搭建-代码生成器

项目路径

主键生成策略

包名称

代码生成器



```java
 @Test  public void testGenerator() {  

//全局配置

  GlobalConfig config = new GlobalConfig();

  config.setActiveRecord(true)   //是否支持AR模式      

   .setAuthor("weiyunhui") //作者

   .setOutputDir("D:\\workspace_my\\mp03\\src\\main\\java") //生成路径    

    .setFileOverride(true)//文件覆盖    

  .setServiceName("%sService")  //设置生成的service接口名 首字母是否为I    

  .setIdType(IdType.AUTO) //主键策略       ; 

 
  //数据源配置   DataSourceConfig dsConfig = new DataSourceConfig();  

dsConfig.setDbType(DbType.MYSQL)  

  .setUrl("jdbc:mysql://localhost:3306/javaEE_0228")  

 .setDriverName("com.mysql.jdbc.Driver")    

.setUsername("root")  

  .setPassword("1234");  

//策略配置  

StrategyConfig  stConfig = new StrategyConfig();

  stConfig.setCapitalMode(true)  // 全局大写命名  

  .setDbColumnUnderline(true)  //表名 字段名 是否使用下滑 线命名    

.setNaming(NamingStrategy.underline_to_camel) // 数据 库表映射到实体的命名策略

    .setInclude("tbl_employee")  //生成的表

    .setTablePrefix("tbl_"); // 表前缀  

//包名策略  

PackageConfig pkConfig = new PackageConfig();  

pkConfig.setParent("com.atguigu.mp")

    .setController("controller")  

  .setEntity("beans")  

  .setService("service");

  AutoGenerator ag  = new AutoGenerator().setGlobalConfig(config)    

     .setDataSource(dsConfig)        

 .setStrategy(stConfig)    

     .setPackageInfo(pkConfig);  

ag.execute();  }   
```

#### P23 讲师管理模块-讲师列表





#### P25 整合Swagger

```
@Configurateion
@EnableSwagger2
public class SwaggerConfig{

}
```



配置扫描是的Swagger配置文件被扫描到



#### P26 统一结果返回

1、创建模块common_utils

2、定义接口，定义数据返回状态码

3、定义返回数据格式



构造方法私有化 不能使用new 创建静态方法成功的方法 和 失败的方法

链式编程 R.setMsg().setXX().set();







#### P28 分页查询

创建Page<Entity>对象



#### P29条件查询分页



#### P33 统一异常处理-全局异常



```
@ContollerAdvice
@ExceptionHandler(Exception.class)
@ReponseBody

```



#### P34 特定异常/自定义处理

##### 特定异常

```
@ContollerAdvice
@ExceptionHandler(Exception.class)
@ReponseBody

```

##### 自定义异常

```

```



#### P36 统一日志管理

LogBack





#### P53 项目第4天

- axios 在vue发送ajax请求
- element-ui
- nodejs
- npm
- babel
- 模块化
- webpack

- 项目搭建

#### P54 前端技术-axios使用

```vue
<script src="vue.min.js"></script>
<script src="axios.min.js"></script>
<script>
new Vue({
	el: “#app”,
	data: {
	
	},
	created(){
	
	},
	methods:{
		
	}	
})
<script>
```



#### P55 前端技术-axios使用2





#### P56 前端技术-element-ui介绍





#### P57 前端技术-nodejs介绍

###### 1、nodejs是什么

（2）简单的解释Node.js是运行在服务端的JavaScript

​	不需要浏览器，直接用nodejs运行JavaScript代码

（2）模拟服务器效果，比如tomcat

###### 2、安装nodejs

​	检查是否安装成功

```
node -v
```

###### 3、使用nodejs运行javascript代码

#### P58 前端技术-nodejs问题说明

4、vscode中打开

​	项目文件 右键 在终端中打开

5、问题说明

vscode 中 使用命令node -v 报错

解决方法：

​	先确定cmd 中 输入node -v 是否显示正常

​	vscode 图标，右键属性-兼容性 以管理员身份运行



#### P59 npm包管理工具

1、什么是NPM

Node Package Manage node包管理工具



#### P60 babal转码器

1、babel是什么

babel是转码器，把es6代码转为es5语法



2、安装babel工具

```
# npm 镜像加速
npm install --registry=https://registry.npm.taobao.org

npm install --global babel-cli

# 检查是否安装成功
babel --version
```

3、创建es6文件 转码为es5

```
let input =[1,2,3]
input=input.map(item=>item+1)
console.log(input)
```

4、创建.babelrc文件

```
{
    "presets": ["es2015"],
    "plugins":[]
}
```

5、安装转码器

在项目中安装

```
npm install --save-dev babel-preset-es2015
```

6、转码

```
mkdir dist1
bable src/example.js --out-file dist1/comiled.js
#或者
babel src/example.js -o dist1/comiled.js

#整个目录转码
mkdir dist2
bable src --out-dir dist2
```










